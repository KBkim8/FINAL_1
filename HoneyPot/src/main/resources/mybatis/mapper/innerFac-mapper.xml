<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="innerFac">
	<!-- 모든시설의 모든 정보 조회 -->
	<select id="getAllInnerFacInfo" resultType="com.hp.app.innerFac.vo.InnerFacVo">
		SELECT
			NO
			,NAME
			,CONTENT
			,MAX_NUM
			,OPEN_TIME
			,CLOSE_TIME
			,STATUS
			,LOCATION
		FROM AMENITY 
	</select>
	
	<select id="getOpenCloseTime" resultType="com.hp.app.innerFac.vo.InnerFacVo">
		SELECT OPEN_TIME, CLOSE_TIME
		FROM AMENITY WHERE NO=#{no}
	</select>
	<select id="getPeopleCnt">
	</select>
	<insert id="makeReservation"> 
		INSERT INTO AMENITY_RESERVATION 
			(NO,AMENITY_NO,MEMBER_NO,RESERVE_TIME) 
		VALUES 
			(SEQ_AMENITY_RESERVATION_NO.NEXTVAL, #{amenityNo}, #{memberNo}, #{reserveTime})
	</insert>
	
	<!-- 개인의 예약현황을 불러오기 -->
	<select id="getReservationTimeInfo" resultType="String">
		SELECT RESERVE_TIME 
		FROM AMENITY_RESERVATION 
		WHERE MEMBER_NO=#{memberNo} 
		AND RESERVE_TIME LIKE '${reserveTime}%'
	</select>
</mapper>